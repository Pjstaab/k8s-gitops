---
apiVersion: metal.sidero.dev/v1alpha1
kind: ServerClass
metadata:
  name: control-plane
spec:
  selector:
    matchLabels:
      controlplane: "true"
  configPatches:
    - op: replace
      path: /machine/install/disk
      value: /dev/sda
    # - op: replace
    #   path: /cluster/proxy/disabled
    #   value: true
    # - op: add
    #   path: /cluster/apiServer/extraArgs
    #   value:
    #     feature-gates: MixedProtocolLBService=true,ReadWriteOncePod=true,StatefulSetAutoDeletePVC=true
    # - op: add
    #   path: /cluster/scheduler/extraArgs
    #   value:
    #     feature-gates: MixedProtocolLBService=true,ReadWriteOncePod=true,StatefulSetAutoDeletePVC=true
    # - op: add
    #   path: /machine/kubelet/extraArgs
    #   value:
    #     rotate-server-certificates: true
    #     feature-gates: MixedProtocolLBService=true,ReadWriteOncePod=true,StatefulSetAutoDeletePVC=true
