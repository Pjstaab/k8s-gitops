apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  # - ../../base/actions-runner-system
  - ../../base/flux-system
  - ../../base/home-system
  - ../../base/home-system/home-assistant
  - ../../base/home-system/mosquitto
  - ../../base/home-system/zigbee2mqtt/poe-controller
  - ../../base/istio-system
  - ../../base/kube-system
  # - ../../base/kube-system/cilium
  # - ../../base/kube-system/descheduler
  # - ../../base/kube-system/metrics-server
  - ../../base/kube-system/reloader
  - ../../base/kube-system/sealed-secrets
  - ../../base/kube-system/secret-store-csi-driver
  # - ../../base/litmus
  - ../../base/network
  - ../../base/network/cert-manager
  - ../../base/network/cloudflare-ddns
  - ../../base/network/coredns
  - ../../base/network/dex
  - ../../base/network/external-dns
  # TODO: Currently does not support ARM64
  # https://github.com/cert-manager/istio-csr/issues/89
  # - ../../base/network/istio-csr
  - ../../base/network/metallb
  - ../../base/network/node-feature-discovery
  - ../../base/network/oauth2-proxy
  - ../../base/network/origin-ca-issuer
  - ../../base/observability
  # - ../../base/observability/kiali
  # - ../../base/observability/kube-prometheus-stack
  - ../../base/observability/loki-stack
  # - ../../base/observability/speedtest
  - ../../base/observability/thanos
  # - ../../base/security
  # - ../../base/security/gatekeeper
  - ../../base/storage/openebs
  # blockdevices will persist across devices
  # - ../../base/storage/openebs/cstor-pool.yaml
  - ../../base/velero
  - ../../base/velero/velero
patchesStrategicMerge:
  - patch.yaml
